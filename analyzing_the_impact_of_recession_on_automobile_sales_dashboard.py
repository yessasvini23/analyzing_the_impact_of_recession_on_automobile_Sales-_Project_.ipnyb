# -*- coding: utf-8 -*-
"""analyzing_the_impact_of_recession_on_automobile_Sales /dashboard.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1DTLb3aGzry0knL8ApZ6d7UWxt3ChNS2N

![image.png](data:image/png;base64,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)

# Create visualizations using Matplotib, Seaborn and Folium

In this project, I demonstrate the skills I have acquired in creating visualizations using Matplotlib, Seaborn, Folium.

After each task you will be required to save your plots as an image or screenshot using the filenames specified. You will be uploading these images during your final project submission so they can be evaluated by your peers.

# Table of Contents

1.   Objectives
2.   Setup
      A Installing Required Libraries
      B  Importing Required Libraries
3.   Scenario
     A Data Description
4.  Importing data
5.   Creating Visualizations for Data Analysis

#Objectives

After completing this lab you will be able to:



*  Create informative and visually appealing plots with Matplotlib and Seaborn.
*   Apply visualization to communicate insights from the data.
*   Analyze data through using visualizations.
*   Customize visualizations

# Setup

For this lab, we will be using the following libraries:



*   pandas for managing the data.

*   numpy for mathematical operations.
*   matplotlib for plotting.
*   seaborn for plotting.
*   Folium for plotting.

# Installing Required Libraries
The following required libraries are pre-installed in the Skills Network Labs environment. However, if you run these notebook commands in a different Jupyter environment (e.g. Watson Studio or Ananconda), you will need to install these libraries by removing the # sign before %pip in the code cell below.
"""

# All Libraries required for this lab are listed below. The libraries pre-installed on Skills Network Labs are commented.
# %pip install -qy pandas==1.3.4 numpy==1.21.4 matplotlib==3.5.0 seaborn folium
# Note: If your environment doesn't support "%pip install", use "!mamba install"

# Commented out IPython magic to ensure Python compatibility.
# %pip install seaborn
# %pip install folium

"""# Importing Required Libraries
We recommend you import all required libraries in one place (here):
"""

# Commented out IPython magic to ensure Python compatibility.
import numpy as np
import pandas as pd
# %matplotlib inline
import matplotlib as mpl
import matplotlib.pyplot as plt
import seaborn as sns
import folium

"""Click here for a hint

You will require:-
Numpy for many scientific computing in Python
Pandas for creating and working on dataframe, also for plotting directly on dataframe/series
The inline backend to generate the plots within the browser [%matplotlib inline]
Matplotlib and its pyplot pacakge for plotting
Seaborn for plotting

Click here for python solution

#Import Primary Modules:
    import numpy as np
    import pandas as pd
    %matplotlib inline
    import matplotlib as mpl
    import matplotlib.pyplot as plt
    import seaborn as sns
    import folium

# Scenario

In this assignment you will be tasked with creating plots which answer questions for analysing "historical_automobile_sales" data to understand the historical trends in automobile sales during recession periods.
recession period 1 - year 1980
recession period 2 - year 1981 to 1982
recession period 3 - year 1991
recession period 4 - year 2000 to 2001
recession period 5 - year end 2007 to mid 2009
recession period 6 - year 2020 -Feb to April (Covid-19 Impact)

# Data Description

The dataset used for this visualization assignment contains historical_automobile_sales data representing automobile sales and related variables during recession and non-recession period.

The dataset includes the following variables:
1. Date: The date of the observation.
2. Recession: A binary variable indicating recession perion; 1 means it was recession, 0 means it was normal.
3. Automobile_Sales: The number of vehicles sold during the period.
4. GDP: The per capita GDP value in USD.
5. Unemployment_Rate: The monthly unemployment rate.
6. Consumer_Confidence: A synthetic index representing consumer confidence, which can impact consumer spending and automobile purchases.
7. Seasonality_Weight: The weight representing the seasonality effect on automobile sales during the period.
8. Price: The average vehicle price during the period.
9. Advertising_Expenditure: The advertising expenditure of the company.
10.Vehicle_Type: The type of vehicles sold; Supperminicar, Smallfamiliycar, Mediumfamilycar, Executivecar, Sports.
11.Competition: The measure of competition in the market, such as the number of competitors or market share of major manufacturers.
12.Month: Month of the observation extracted from Date..
13.Year: Year of the observation extracted from Date.
By examining various factors mentioned above from the dataset, you aim to gain insights into how recessions impacted automobile sales for your company.

# Importing Data
For your convenience, we have already written code to import the data below.
"""

!pip install io

from aiohttp import ClientSession

URL = "https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork/Data%20Files/historical_automobile_sales.csv"

async def fetch_data():
    async with ClientSession() as session:
        async with session.get(URL) as response:
            return await response.read()

text = await fetch_data()

import pandas as pd
import io
df = pd.read_csv(io.BytesIO(text))

print('Data downloaded and read into a dataframe!')

df.describe()

df.columns

"""# Creating Visualizations for Data Analysis

#ASK 1.1: Develop a Line chart using the functionality of pandas to show how automobile sales fluctuate from year to year

Click here for a hint
You will require:-
to group the year and calculate the average on the 'Automobile Sales', as the data has years and months column
make use of .plot() with kind = 'line'
donot forget to include labels and title

"""

import matplotlib.pyplot as plt
# Create data for plotting
df_line = df.groupby(df['Year'])['Automobile_Sales'].mean()

# Create the plot
plt.figure(figsize=(10, 6))
df_line.plot(kind='line')
plt.xlabel('Year')
plt.ylabel('Sales Volume')
plt.title('Automobile Sales over Time')
plt.show()

"""# Click here for a solution template

"""

#create data for plotting
df_line = df.groupby(df['Year'])['Automobile_Sales'].mean()
#create figure
plt.figure(figsize=(10, 6))
df_line.plot(kind = 'line')
plt.xlabel('Year')
plt.ylabel('Sales Volume')
plt.title('Automobile Sales over Time')
plt.show()

"""#Include the following on the plot

ticks on x- axis with all the years, to identify the years of recession
annotation for at least two years of recession
Title as Automobile Sales during Recession

Click here for a hint
You can create the list for the range 1980 till 2023 and pass that list to the plt.xticks function or you can directly pass the range to the function. You might need to rotate the ticks to an angle so that they fit in well on the axis You can include annotation with plt.text(x, y, 'text to display')

"""

# Enhanced plot with x-axis ticks and annotations

plt.figure(figsize=(10, 6))
df_line.plot(kind='line')
plt.xticks(list(range(1980, 2024)), rotation=75)
plt.xlabel('Year')
plt.ylabel('Sales Volume')
plt.title('Automobile Sales during Recession')
plt.text(1982, df_line[1982], '1981-82 Recession', rotation=45)
plt.text(1991, df_line[1991], '1991 Recession', rotation=45)
plt.legend()
plt.tight_layout()
plt.savefig("Line_Plot_1.png")
plt.show()

"""Click here for Solution template
    
    plt.figure(figsize=(10, 6))
    df_line = ...............
    df_line.plot(kind = 'line')
    plt.xticks(list(range(1980,2024)), rotation = 75)
    plt.xlabel('..............')
    plt.ylabel('............')
    plt.title('...................')
    plt.text(1982, 650, '1981-82 Recession')
    plt.text(......, ..., '..............')
    plt.legend()
    plt.show()

    Save this plot as "Line_Plot_1.png"
*Hint: You can right lick on the plot and then click on "Save image as" option to save it on your local machine*

# TASK 1.2: Plot different lines for categories of vehicle type and analyse the trend to answer the question Is there a noticeable difference in sales trends between different vehicle types during recession periods?

Click here for a hint

<p>
You will require:-
<br>create a separate dataframe where the column recession has a value of '1'
<br>to group the year, vehicle_type and calculate the average on the 'Automobile Sales'
<br>one way is to -
<br>use as_index as false else you will endup with multiple-indexed datafame
<br>later set year as index and groupby vehicle over Sales and plot
<br>make use of .plot() with kind = 'line'
<br>do not forget to include labels and title
"""

# Grouping by 'Year' and 'Vehicle_Type' and summing up the 'Automobile_Sales'
df_Mline = df[df['Recession'] == 1].groupby(['Year', 'Vehicle_Type'])['Automobile_Sales'].sum().unstack()

# Plotting the sales trend for each vehicle type during recession
plt.figure(figsize=(10, 6))
df_Mline.plot(kind='line', ax=plt.gca())
plt.xlabel('Year')
plt.ylabel('Sales Volume')
plt.title('Sales Trend Vehicle-wise during Recession')
plt.legend(title='Vehicle Type')
plt.tight_layout()
plt.savefig("Line_Plot_2.png")
plt.show()

"""#Click here for Solution template

    df_Mline = df.groupby(['Year','Vehicle_Type'], as_index=False)['Automobile_Sales'].sum()
    df_Mline.set_index('Year', inplace=True)
    df_Mline = df_Mline.groupby(['Vehicle_Type'])['Automobile_Sales']
    df_Mline.plot(kind='line')
    plt.xlabel('..............')
    plt.ylabel('............')
    plt.title('Sales Trend Vehicle-wise during Recession')
    plt.legend()
    plt.show()

#From the above plot, what insights have you gained on the sales of various vehicle types?
Type in your answer below:

# Inference
Inference: From this plot, we can understand that during recession period, the sales for 'Sports type vehicles' declined because of the high cost of the vehicle.
while sales of the superminicar and smallfamilycar increased.

Save this plot as "Line_Plot_2.png"
*Hint: You can right lick on the plot and then click on "Save image as" option to save it on your local machine*

#TASK 1.3: Use the functionality of Seaborn Library to create a visualization to compare the sales trend per vehicle type for a recession period with a non-recession period.

Click here for a hint
To visualize the average number of vehicles sold during recession and non-recession periods, you can use a bar chart
You will need to group recession average Automobile_Sales and then plot it
Make use of sns.barplot(x=x,y=y, data = df)
"""

# Install seaborn module
!pip install seaborn
# Import seaborn module
import seaborn as sns
# Grouping data by 'Recession' and 'Vehicle_Type' and calculating the mean 'Automobile_Sales'
dd = df.groupby(['Recession', 'Vehicle_Type'])['Automobile_Sales'].mean().reset_index()

# Plotting the grouped bar chart using seaborn
plt.figure(figsize=(10, 6))
sns.barplot(x='Recession', y='Automobile_Sales', hue='Vehicle_Type', data=dd)
plt.xticks(ticks=[0, 1], labels=['Non-Recession', 'Recession'])
plt.xlabel('Period')
plt.ylabel('Average Sales')
plt.title('Vehicle-Wise Sales during Recession and Non-Recession Period')
plt.legend(title="Vehicle Type")

plt.show()

"""Click here for Solution template
new_df = df.groupby('Recession')['Automobile_Sales'].mean().reset_index()

    # Create the bar chart using seaborn
    plt.figure(figsize=(.........., ............)
    sns.barplot(x='Recession', y='Automobile_Sales', hue='Recession',  data=new_df)
    plt.xlabel('............')
    plt.ylabel('...............')
    plt.title('Average Automobile Sales during Recession and Non-Recession')
    plt.xticks(ticks=[0, 1], labels=['Non-Recession', 'Recession'])
    plt.show()

Now you want to compare the sales of different vehicle types during a recession and a non-recession period

We recommend that you use the functionality of Seaborn Library to create this visualization

Click here for a hint
To visualize sales of different vehicles during recession and non-recession periods, you can use a bar chart
You will need to group Recession, Vehicle_Type for average Automobile_Sales and then plot it
Make use of sns.barplot(x=x,y=y, data = df)
"""

# Grouping the data by 'Recession' and 'Vehicle_Type' and calculating the average 'Automobile_Sales'
dd = df.groupby(['Recession','Vehicle_Type'])['Automobile_Sales'].mean().reset_index()

# Creating the grouped bar chart using seaborn
plt.figure(figsize=(10, 6))
sns.barplot(x='Recession', y='Automobile_Sales', hue='Vehicle_Type', data=dd)
plt.xticks(ticks=[0, 1], labels=['Non-Recession', 'Recession'])
plt.xlabel('Period')
plt.ylabel('Average Sales')
plt.title('Vehicle-Wise Sales during Recession and Non-Recession Period')
plt.legend(title='Vehicle Type')
plt.tight_layout()
plt.savefig("Bar_Chart.png")
plt.show()

"""# Click here for Solution template
# Filter the data for recessionary periods
    recession_data = df[df['Recession'] == 1]

    dd=df.groupby(['Recession','Vehicle_Type'])['Automobile_Sales'].mean().reset_index()

    # Calculate the total sales volume by vehicle type during recessions
    #sales_by_vehicle_type = recession_data.groupby('Vehicle_Type')['Automobile_Sales'].sum().reset_index()

    # Create the grouped bar chart using seaborn
    plt.figure(figsize=(10, 6))
    sns.barplot(x='Recession', y='Automobile_Sales', hue='Vehicle_Type', data=dd)
    plt.xticks(ticks=[0, 1], labels=['Non-Recession', 'Recession'])
    plt.xlabel('Period')
    plt.ylabel('Average Sales')
    plt.title('Vehicle-Wise Sales during Recession and Non-Recession Period')

    plt.show()

#From the above chart what insights have you gained on the overall sales of automobiles during recession?
#Type your answer below:-


Inference
From this plot, we can understand that there is a drastic decline in the overall sales of the automobiles during recession.
However, the most affected type of vehicle is executivecar and sports

Save this plot as "Bar_Chart.png"
*Hint: You can right lick on the plot and then click on "Save image as" option to save it on your local machine*

#TASK 1.4: Use sub plotting to compare the variations in GDP during recession and non-recession period by developing line plots for each period.


Now, you want to find more insights from the data to understand the reason.
Plot a two line charts using subplotting to answer:-

#How did the GDP vary over time during recession and non-recession periods?

Make use of add_subplot() from Matplotlib for this comparision.
"""

# Splitting data for recession and non-recession periods
rec_data = df[df['Recession'] == 1]
non_rec_data = df[df['Recession'] == 0]

# Creating subplots
fig, (ax0, ax1) = plt.subplots(nrows=1, ncols=2, figsize=(12, 6))

# Plotting GDP variation during recession on the first subplot
sns.lineplot(x='Year', y='GDP', data=rec_data, ax=ax0)
ax0.set_title('GDP Variation during Recession Period')
ax0.set_xlabel('Year')
ax0.set_ylabel('GDP')

# Plotting GDP variation during non-recession on the second subplot
sns.lineplot(x='Year', y='GDP', data=non_rec_data, ax=ax1)
ax1.set_title('GDP Variation during Non-Recession Period')
ax1.set_xlabel('Year')
ax1.set_ylabel('GDP')

plt.tight_layout()
plt.savefig("Subplot.png")
plt.show()

"""Click here for Solution template
#Create dataframes for recession and non-recession period
    rec_data = df[df['Recession'] == 1]
    non_rec_data = df[df['Recession'] == 0]
    
    #Figure
    fig=plt.figure(figsize=(12, 6))
    
    #Create different axes for subploting
    ax0 = fig.add_subplot(1, 2, 1) # add subplot 1 (1 row, 2 columns, first plot)
    ax1 = fig.add_subplot(... ,... ,... ) # add subplot 2 (1 row, 2 columns, second plot).
    
    #plt.subplot(1, 2, 1)
    sns.lineplot(x='Year', y='GDP', data=rec_data, label='Recession', ax=ax0)
    ax0.set_xlabel('Year')
    ax0.set_ylabel('GDP')
    ax0.set_title('GDP Variation during Recession Period')
    
    #plt.subplot(1, 2, 2)
    sns.lineplot(x='......', y='......', data=........, label='.........',ax=...)
    ax1.set_xlabel('.....')
    ax1.set_ylabel('.......')
    ax1.set_title('..........')
    
    plt.tight_layout()
    plt.show()

   #------------------------------------------------Alternatively--------------
   #Using subplot()
    plt.figure(figsize=(............, ..........))
    
    #subplot 1
    plt.subplot(1, 2, 1)
    sns.lineplot(x='.........', y='......', data=.........., label='......')
    plt.xlabel('.......')
    plt.ylabel('..........')
    plt.legend()
    #subplot 1
    plt.subplot(1, 2, 2)
    sns.lineplot(x='.........', y='......', data=.........., label='......')
    plt.xlabel('.......')
    plt.ylabel('..........')
    plt.legend()
    
    plt.tight_layout()
    plt.show()

# Inference
From this plot, it is evident that during recession, the GDP of the country was in a low range, might have afected the overall sales of the company

Save this plot as "Subplot.png"
Hint: You can right lick on the plot and then click on "Save image as" option to save it on your local *machine*

#TASK 1.5: Develop a Bubble plot for displaying the impact of seasonality on Automobile Sales.

How has seasonality impacted the sales, in which months the sales were high or low? Check it for non-recession years to understand the trend


Develop a Bubble plot for displaying Automobile Sales for every month and use Seasonality Weight for representing the size of each bubble
Title this plot as 'Seasonality impact on Automobile Sales'

Click here for a hint

You can create Bubble Chart by calling the scatter()
Pass the 'Month' and 'Automobile_Sales' to the functions as x and y and then use Seasonality weight for size **parameter**
"""

# Filtering for non-recession data
non_rec_data = df[df['Recession'] == 0]

# Using Seasonality_Weight for the size of bubbles
size = non_rec_data['Seasonality_Weight'] * 10  # Amplifying for better visualization

# Creating the bubble plot
plt.figure(figsize=(12, 6))
sns.scatterplot(data=non_rec_data, x='Month', y='Automobile_Sales', size=size, legend=False, sizes=(50, 500))
plt.xlabel('Month')
plt.ylabel('Automobile Sales')
plt.title('Seasonality impact on Automobile Sales')
plt.tight_layout()
plt.savefig("Bubble.png")
plt.show()

"""Click here for Solution template
non_rec_data = df[df['Recession'] == 0]
    
    size=non_rec_data['Seasonality_Weight'] #for bubble effect
    
    sns.scatterplot(data=non_rec_data, x='....', y='........', size=size)
    
    #you can further include hue='Seasonality_Weight', legend=False)

    plt.xlabel('Month')
    plt.ylabel('Automobile_Sales')
    plt.title('Seasonality impact on Automobile Sales')

    plt.show()

Inference
From this plot, it is evident that seasonality has not affected on the overall sales. However, there is a drastic raise in sales in the month of April

Save this plot as "Bubble.png"
Hint: You can right lick on the plot and then click on "Save image as" option to save it on your local machine

#TASK 1.6: Use the functionality of Matplotlib to develop a scatter plot to identify the correlation between average vehicle price relate to the sales volume during recessions.

#From the data, develop a scatter plot to identify if there a correlation between consumer confidence and automobile sales during recession period?

Title this plot as 'Consumer Confidence and Automobile Sales during Recessions'

Click here for a hint
You can create dataframe where recession is '1'.
Pass the 'Consumer_Confidence' and 'Automobile_Sales' to the plt.scatter()
"""

# Filtering for recession data
rec_data = df[df['Recession'] == 1]

# Creating a scatter plot for Consumer Confidence vs. Automobile Sales during recession
plt.figure(figsize=(10, 6))
plt.scatter(rec_data['Consumer_Confidence'], rec_data['Automobile_Sales'], alpha=0.5)
plt.xlabel('Consumer Confidence')
plt.ylabel('Automobile Sales')
plt.title('Consumer Confidence and Automobile Sales during Recessions')
plt.tight_layout()
plt.savefig("Scatter_Confidence.png")
plt.show()

"""Click here for Solution template
#Create dataframes for recession and non-recession period
    rec_data = df[df['Recession'] == 1]
    plt.scatter(recession_data['Consumer_Confidence'], rec_data['Automobile_Sales'])
    
    plt.xlabel('.....')
    plt.ylabel('.......')
    plt.title('..........')
    plt.show()

    How does the average vehicle price relate to the sales volume during recessions?
Plot another scatter plot and title it as 'Relationship between Average Vehicle Price and Sales during Recessions'


"""

# Creating another scatter plot for Price vs. Automobile Sales during recession
plt.figure(figsize=(10, 6))
plt.scatter(rec_data['Price'], rec_data['Automobile_Sales'], alpha=0.5, color='orange')
plt.xlabel('Average Vehicle Price')
plt.ylabel('Automobile Sales')
plt.title('Relationship between Average Vehicle Price and Sales during Recessions')
plt.tight_layout()
plt.savefig("Scatter_Price.png")
plt.show()

"""Click here for Solution template
#Create dataframes for recession and non-recession period
    rec_data = df[df['Recession'] == 1]
    plt.scatter(recession_data['Price'], rec_data['Automobile_Sales'])
    
    plt.xlabel('.....')
    plt.ylabel('.......')
    plt.title('..........')
    plt.show()
Inference
There is not much relation!

Save this plot as "Scatter.png"
Hint: You can right lick on the plot and then click on "Save image as" option to save it on your local machine

#TASK 1.7: Create a pie chart to display the portion of advertising expenditure of XYZAutomotives during recession and non-recession periods.


How did the advertising expenditure of XYZAutomotives change during recession and non-recession periods?


Click here for a hint
You can create two dataframe for recession and nonreccession period.
Calculate the sum of Advertising_Expenditure for both dataframes
Pass these total values to plt.pie(). May include labels as ['Recession', 'Non-Recession']
Feel Free to customie the pie further
title this plot as - Advertising Expenditure during Recession and Non-Recession Periods
"""

Rdata = df[df['Recession'] == 1]
NRdata = df[df['Recession'] == 0]

RAtotal = Rdata['Advertising_Expenditure'].sum()
NRAtotal = NRdata['Advertising_Expenditure'].sum()

plt.figure(figsize=(8, 6))
labels = ['Recession', 'Non-Recession']
sizes = [RAtotal, NRAtotal]
plt.pie(sizes, labels=labels, autopct='%1.1f%%', startangle=90)
plt.title('Advertising Expenditure during Recession and Non-Recession Periods')

# Save the figure before showing it
plt.savefig("Pie_1.png", dpi=300, bbox_inches='tight')  # Adjust path as needed

plt.show()

"""Click here for Solution template
# Filter the data
    Rdata = df[df['Recession'] == 1]
    NRdata = df[df['Recession'] == 0]

    # Calculate the total advertising expenditure for both periods
    RAtotal = Rdata['Advertising_Expenditure'].sum()
    NRAtotal = NRdata['Advertising_Expenditure'].sum()

    # Create a pie chart for the advertising expenditure
    plt.figure(figsize=(8, 6))

    labels = ['Recession', 'Non-Recession']
    sizes = [RAtotal, NRtotal]
    plt.pie(sizes, labels=labels, autopct='%1.1f%%', startangle=90)

    plt.title('Advertising Expenditure during Recession and Non-Recession Periods')

    plt.show()

#From the above plot, what insights do you find on the advertisement expenditure during recession and non recession periods?
#Type your answer below:-


The pie chart depicts the advertising expenditure of XYZAutomotives during two distinct economic conditions: recession and non-recession period

Inference It seems ABCAutomotives has been spending much more on the advertisements during non-recession periods as compared to during recession times. Fair enough!

Save this plot as "Pie_1.png"
*Hint: You can right lick on the plot and then click on "Save image as" option to save it on your local machine*

#TASK 1.8: Develop a pie chart to display the total Advertisement expenditure for each vehicle type during recession period.

Can we observe the share of each vehicle type in total sales during recessions?

#Create another pie plot to display the total advertisement expenditure for each vehicle type

Click here for a hint
You will be required to group vehicle type for sum of advertisement expenditure.
the plot a pie with the data, May include relevant labels
title this plot as - Share of Each Vehicle Type in Total Sales during Recessions
"""

# Filter the data
Rdata = df[df['Recession'] == 1]

# Calculate the sales volume by vehicle type during recessions
VTsales = Rdata.groupby('Vehicle_Type')['Advertising_Expenditure'].sum()

# Create a pie chart for the share of each vehicle type in total sales during recessions
plt.figure(figsize=(8, 6))

labels = VTsales.index
sizes = VTsales.values
plt.pie(sizes, labels=labels, autopct='%1.1f%%', startangle=90)

plt.title('Share of Each Vehicle Type in Total Sales during Recessions')

# Save the figure before showing it
plt.savefig("Pie_2.png", dpi=300, bbox_inches='tight')  # Adjust path as needed

# Display the plot
plt.show()

"""Click here for Solution template
# Filter the data
    Rdata = df[df['Recession'] == 1]

    # Calculate the sales volume by vehicle type during recessions
    VTsales = Rdata.groupby('Vehicle_Type')['Advertising_Expenditure'].sum()

    # Create a pie chart for the share of each vehicle type in total sales during recessions
    plt.figure(figsize=(8, 6))

    labels = VTsales.index
    sizes = VTsales.values
    plt.pie(sizes, labels=labels, autopct='%1.1f%%', startangle=90)

    plt.title('Share of Each Vehicle Type in Total Sales during Recessions')

    plt.show()
</details>
Inference
During recession the advertisements were mostly focued on low price range vehicle. A wise decision!

Save this plot as "Pie_2.png"
Hint: You can right lick on the plot and then click on "Save image as" option to save it on your local machine

#TASK 1.9: Develop a countplot to analyse the effect of the unemployment rate on vehicle type and sales during the Recession Period.

Analyze the effect of the unemployment rate on vehicle type and sales during the Recession Period

You can create a countplot and title the plot as 'Effect of Unemployment Rate on Vehicle Type and Sales'

Click here for a hint
Filter out the data for recession period
Make use of countplot() from seaborn and pass the relavent data
"""

# Filter out the data for recession period
data= df[df['Recession'] == 1]

# Create the countplot
plt.figure(figsize=(10, 6))
sns.countplot(data=data, x='unemployment_rate', hue='Vehicle_Type')

# Set plot labels and title
plt.xlabel('Unemployment Rate')
plt.ylabel('Count')
plt.title('Effect of Unemployment Rate on Vehicle Type and Sales')
plt.legend(loc='upper right')

# Save the plot
plt.savefig("count_plot.png", dpi=300, bbox_inches='tight')

# Display the plot
plt.show()

"""Click here for Solution template
data= df[df['Recession'] == 1]
    
    plt.figure(figsize=(10, 6))
    
    sns.countplot(data=data, x='unemployment_rate', hue='Vehicle_Type')
    
    plt.xlabel('Unemployment Rate')
    plt.ylabel('Count')
    plt.title('Effect of Unemployment Rate on Vehicle Type and Sales')
    plt.legend(loc='upper right')
    plt.show()


  # From the above plot, what insights have you gained on the sales of superminicar, smallfamilycar, mediumminicar?
  #Type your answer below:-



  From the count plot visualizing the effect of the unemployment rate on vehicle type sales during the recession, the following observations can be made:

Superminicar: As the unemployment rate increases, sales of superminicars tend to increase. This suggests that during times of economic downturn, consumers may prefer more economical and affordable vehicles.

Smallfamilycar: Similarly, the sales of small family cars also show an upward trend with increasing unemployment rates. This further supports the notion that during a recession, consumers might be more inclined towards vehicles that are more cost-effective and provide better value for money.

Mediumminicar: The sales trend for medium minicars appears to be somewhat consistent across varying unemployment rates. This suggests that medium minicars might be a popular choice irrespective of the economic conditions, possibly due to their balance between affordability and features.

In summary, during recession periods characterized by higher unemployment rates, there seems to be a shift in consumer preference towards more affordable vehicle options. This behavior can be attributed to the financial constraints and uncertainty that people face during such times, leading them to make more conservative spending decisions.

Inference During recession, buying pattern changed, the sales of low range vehicle like superminicar,smallfamilycar and Mediumminicar

Save this plot as "count_plot.png"
*Hint: You can right lick on the plot and then click on "Save image as" option to save it on your local machine*

# OPTIONAL : TASK 1.10 Create a map on the hightest sales region/offices of the company during recession period
"""

import requests

async def download(url, filename):
    response = requests.get(url)
    if response.status_code == 200:
        with open(filename, "wb") as f:
            f.write(response.content)

path = 'https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBMDeveloperSkillsNetwork-DV0101EN-SkillsNetwork/Data%20Files/us-states.json'
await download(path, "us-states.json")

filename = "us-states.json"

"""#You found that the datset also contains the location/city for company offices. Now you want to show the recession impact on various offices/city sales by developing a choropleth"""

import folium

# Filter the data for the recession period and specific cities
recession_data = data[data['Recession'] == 1]

# Calculate the total sales by city
sales_by_city = recession_data.groupby('City')['Automobile_Sales'].sum().reset_index()

# Create a base map centered on the United States
map1 = folium.Map(location=[37.0902, -95.7129], zoom_start=4)

# Create a choropleth layer using Folium
choropleth = folium.Choropleth(
    geo_data= 'us-states.json',  # GeoJSON file with state boundaries
    data=sales_by_city,
    columns=['City', 'Automobile_Sales'],
    key_on='feature.properties.name',
    fill_color='YlOrRd',
    fill_opacity=0.7,
    line_opacity=0.2,
    legend_name='Automobile Sales during Recession'
).add_to(map1)


# Add tooltips to the choropleth layer
choropleth.geojson.add_child(
    folium.features.GeoJsonTooltip(['name'], labels=True)
)

# Display the map
map1

"""Click for Solution
# Filter the data for the recession period and specific cities
    recession_data = data[data['Recession'] == 1]

    # Calculate the total sales by city
    sales_by_city = recession_data.groupby('City')['Automobile_Sales'].sum().reset_index()

    # Create a base map centered on the United States
    map1 = folium.Map(location=[37.0902, -95.7129], zoom_start=4)

    # Create a choropleth layer using Folium
    choropleth = folium.Choropleth(
        geo_data= 'us-states.json',  # GeoJSON file with state boundaries
        data=sales_by_city,
        columns=['City', 'Automobile_Sales'],
        key_on='feature.properties.name',
        fill_color='YlOrRd',
        fill_opacity=0.7,
        line_opacity=0.2,
        legend_name='Automobile Sales during Recession'
    ).add_to(map1)


# Add tooltips to the choropleth layer
    choropleth.geojson.add_child(
        folium.features.GeoJsonTooltip(['name'], labels=True)
    )

    # Display the map
    map1


  # Congratulations! You have completed the lab

#Authors
Dr. Pooja

#Change Log
          Date (YYYY-MM-DD)	Version	Changed By	Change Description
2023-06-17|0.2|Pooja|Initial Lab Creation| |2023-05-01|0.1|Shengkai|Create Lab Template|

Copyright © 2023 IBM Corporation. All rights reserved.
"""